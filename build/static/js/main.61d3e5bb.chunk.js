(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},132:function(e,t,a){},163:function(e,t){},179:function(e,t,a){},182:function(e,t,a){},184:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),l=a.n(c),o=(a(103),a(104),a(22)),s=a(11),u=a(8),i=a.n(u),m=a(13),p=a(6),d=a(89),f=a.n(d).a.create({baseURL:"http://localhost:8000"}),v=a(185),E=a(186),b=a(187),g=a(188),h=a(90),j=a(198),O=Object(n.createContext)(),y=function(e){var t=Object(n.useState)(!!localStorage.getItem("user")),a=Object(p.a)(t,2),c={isLoggedIn:a[0],setIsloggedIn:a[1]};return r.a.createElement(O.Provider,{value:c},e.children)};function x(e){var t=e.history,a=Object(n.useContext)(O).setIsloggedIn,c=Object(n.useState)(""),l=Object(p.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(""),d=Object(p.a)(u,2),y=d[0],x=d[1],k=Object(n.useState)(!1),S=Object(p.a)(k,2),w=S[0],C=S[1],N=Object(n.useState)("false"),I=Object(p.a)(N,2),_=I[0],T=I[1],D=function(){var e=Object(m.a)(i.a.mark((function e(n){var r,c,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,f.post("/login",{email:o,password:y});case 3:r=e.sent,c=r.data.user_id||!1,l=r.data.user||!1;try{l&&c?(localStorage.setItem("user",l),localStorage.setItem("user_id",c),a(!0),t.push("/")):(s=r.data.message,C(!0),T(s),setTimeout((function(){C(!1),T("")}),2e3))}catch(w){C(!0),T("Error, the server returned an error")}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(v.a,null,r.a.createElement("h2",null,"Login:"),r.a.createElement("p",null,"Please ",r.a.createElement("strong",null,"Login")," into your account"),r.a.createElement(E.a,{onSubmit:D},r.a.createElement(b.a,{className:"mb-2 mr-sm-2 "},r.a.createElement(g.a,{type:"email",name:"email",id:"email",placeholder:"Your email",onChange:function(e){return s(e.target.value)}})),r.a.createElement(b.a,{className:"mb-2 mr-sm-2 "},r.a.createElement(g.a,{type:"password",name:"password",id:"password",placeholder:"Your password",onChange:function(e){return x(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"submit-btn"},"Submit")),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"Secondary-btn",onClick:function(){return t.push("/register")}},"New Account"))),w?r.a.createElement(j.a,{className:"event-validation",color:"danger"}," ",_):"")}var k=a(97),S=a(37),w=a.n(S),C=a(189),N=a(92),I=a(199),_=a(200),T=a(190),D=(a(132),a(91)),P=a.n(D);function L(e){var t=e.history,a=Object(n.useState)([]),c=Object(p.a)(a,2),l=c[0],o=c[1],s=localStorage.getItem("user"),u=localStorage.getItem("user_id"),d=Object(n.useState)(null),v=Object(p.a)(d,2),E=v[0],b=v[1],g=Object(n.useState)(!1),O=Object(p.a)(g,2),y=O[0],x=O[1],S=Object(n.useState)(!1),D=Object(p.a)(S,2),L=D[0],R=D[1],q=Object(n.useState)(""),A=Object(p.a)(q,2),F=A[0],Y=A[1],U=Object(n.useState)([]),M=Object(p.a)(U,2),J=M[0],z=M[1],B=Object(n.useState)(!1),W=Object(p.a)(B,2),G=W[0],H=W[1],K=Object(n.useState)(""),Q=Object(p.a)(K,2),V=Q[0],X=Q[1],Z=Object(n.useState)(!1),$=Object(p.a)(Z,2),ee=$[0],te=$[1];Object(n.useEffect)((function(){ce()}),[]);var ae=Object(n.useMemo)((function(){return P()("http://localhost:8000/",{query:{user:u}})}),[u]);Object(n.useEffect)((function(){ae.on("registration_request",(function(e){return z([].concat(Object(k.a)(J),[e]))}))}),[J,ae]);var ne=function(e){b(e),ce(e)},re=function(){var e=Object(m.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b("myevents"),e.next=4,f.get("/user/events",{headers:{user:s}});case 4:a=e.sent,o(a.data.events),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.push("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(m.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a?"/dashboard/".concat(a):"/dashboard",e.next=4,f.get(n,{headers:{user:s}});case 4:r=e.sent,o(r.data.events),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.push("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.delete("/event/".concat(t),{headers:{user:s}});case 3:R(!0),Y("The event was deleted successfully!"),setTimeout((function(){R(!1),ne(null),Y("")}),2500),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),x(!0),Y("Error when deleting event!"),setTimeout((function(){x(!1),Y("")}),2e3);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/registration/".concat(t.id),{},{headers:{user:s}});case 3:R(!0),Y("The request for the event ".concat(t.title," was successfully!")),setTimeout((function(){R(!1),ne(null),Y("")}),2500),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),x(!0),Y("The request for the event ".concat(t.title," wasn't successfully!")),setTimeout((function(){x(!1),Y("")}),2e3);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/registration/".concat(t,"/approvals"),{},{headers:{user:s}});case 3:te(!0),X("Event approved successfully!"),ie(t),setTimeout((function(){te(!1),X("")}),2e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/registration/".concat(t,"/rejections"),{},{headers:{user:s}});case 3:te(!0),X("Event rejected successfully!"),ie(t),setTimeout((function(){te(!1),X("")}),2e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){var t=J.filter((function(t){return t._id!==e}));z(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"notification"},J.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",null,r.a.createElement("strong",{style:{color:"blue"}},e.user.email)," Is requesting to register to your Event",r.a.createElement("strong",{style:{color:"purple"}}," ",e.event.title)),r.a.createElement(C.a,null,r.a.createElement(h.a,{color:"secondary",onClick:function(){return se(e._id)}},"Accept"),r.a.createElement(h.a,{color:"danger",onClick:function(){return ue(e._id)}},"Reject")))}))),ee?r.a.createElement(j.a,{color:"success"}," ",V):"",r.a.createElement("div",{className:"filter-panel"},r.a.createElement(N.a,{isOpen:G,toggle:function(){return H(!G)}},r.a.createElement(I.a,{color:"success",caret:!0},"Filter"),r.a.createElement(_.a,null,r.a.createElement(T.a,{color:"primary",onClick:function(){return ne(null)},active:null===E},"All Activities"),r.a.createElement(T.a,{color:"primary",onClick:re,active:"myevents"===E},"My Events"),r.a.createElement(T.a,{color:"primary",onClick:function(){return ne("online_training")},active:"online_training"===E},"Online training"),r.a.createElement(T.a,{color:"primary",onClick:function(){return ne("programming")},active:"programming"===E},"Programming"),r.a.createElement(T.a,{color:"primary",onClick:function(){return ne("others")},active:"others"===E},"Other Events")))),r.a.createElement("ul",{className:"events-list"},l.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("header",{style:{backgroundImage:"url(".concat(e.thumbnail_url,")")}},e.user===u?r.a.createElement("div",null,r.a.createElement(h.a,{color:"danger",size:"sm",onClick:function(){return le(e._id)}},"Delete")):""),r.a.createElement("strong",null,e.title),r.a.createElement("span",null,"Event Date: ",w()(e.date).format("l")),r.a.createElement("span",null,"Event Price: \u20a6 ",parseFloat(e.price).toFixed(2)),r.a.createElement("span",null,"Event Description: ",e.description),r.a.createElement("span",null,"Event Type: ",e.activities),r.a.createElement(h.a,{color:"primary",onClick:function(){return oe(e)}},"Registration Request"))}))),y?r.a.createElement(j.a,{className:"event-validation",color:"danger"}," ",F," "):"",L?r.a.createElement(j.a,{className:"event-validation",color:"success"}," ",F):"")}function R(e){var t=e.history,a=Object(n.useContext)(O).setIsloggedIn,c=Object(n.useState)(""),l=Object(p.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(""),d=Object(p.a)(u,2),y=d[0],x=d[1],k=Object(n.useState)(""),S=Object(p.a)(k,2),w=S[0],C=S[1],N=Object(n.useState)(""),I=Object(p.a)(N,2),_=I[0],T=I[1],D=Object(n.useState)(!1),P=Object(p.a)(D,2),L=P[0],R=P[1],q=Object(n.useState)(""),A=Object(p.a)(q,2),F=A[0],Y=A[1],U=function(){var e=Object(m.a)(i.a.mark((function e(n){var r,c,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""===o||""===y||""===w||""===_){e.next=10;break}return e.next=4,f.post("/user/register",{email:o,password:y,firstName:w,lastName:_});case 4:r=e.sent,c=r.data.user||!1,l=r.data.user_id||!1,c&&l?(localStorage.setItem("user",c),localStorage.setItem("user_id",l),a(!0),t.push("/")):(s=r.data.message,R(!0),Y(s),setTimeout((function(){R(!1),Y("")}),2e3)),e.next=13;break;case 10:R(!0),Y("You need to fill all the Inputs"),setTimeout((function(){R(!1),Y("")}),2e3);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(v.a,null,r.a.createElement("h2",null,"Register:"),r.a.createElement("p",null,"Please ",r.a.createElement("strong",null,"Register")," for a new account"),r.a.createElement(E.a,{onSubmit:U},r.a.createElement(b.a,{className:"mb-2 mr-sm-2"},r.a.createElement(g.a,{type:"text",name:"firstName",id:"firstName",placeholder:"Your firstName",onChange:function(e){return C(e.target.value)}})),r.a.createElement(b.a,{className:"mb-2 mr-sm-2"},r.a.createElement(g.a,{type:"text",name:"lastName",id:"lastName",placeholder:"Your Last Name",onChange:function(e){return T(e.target.value)}})),r.a.createElement(b.a,{className:"mb-2 mr-sm-2"},r.a.createElement(g.a,{type:"email",name:"email",id:"email",placeholder:"Your email",onChange:function(e){return s(e.target.value)}})),r.a.createElement(b.a,{className:"mb-2 mr-sm-2"},r.a.createElement(g.a,{type:"password",name:"password",id:"password",placeholder:"Your password",onChange:function(e){return x(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"submit-btn"},"Submit")),r.a.createElement(b.a,null,r.a.createElement(h.a,{className:"Secondary-btn",onClick:function(){return t.push("/login")}},"Login Instead?"))),L?r.a.createElement(j.a,{className:"event-validation",color:"danger"},F):"")}var q=a(191),A=a(192),F=a(95),Y=a.n(F);a(179);function U(e){var t=e.history,a=Object(n.useState)(""),c=Object(p.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(""),u=Object(p.a)(s,2),d=u[0],O=u[1],y=Object(n.useState)(""),x=Object(p.a)(y,2),k=x[0],S=x[1],w=Object(n.useState)(null),C=Object(p.a)(w,2),N=C[0],D=C[1],P=Object(n.useState)("Activities"),L=Object(p.a)(P,2),R=L[0],F=L[1],U=Object(n.useState)(""),M=Object(p.a)(U,2),J=M[0],z=M[1],B=Object(n.useState)(!1),W=Object(p.a)(B,2),G=W[0],H=W[1],K=Object(n.useState)(!1),Q=Object(p.a)(K,2),V=Q[0],X=Q[1],Z=Object(n.useState)(!1),$=Object(p.a)(Z,2),ee=$[0],te=$[1],ae=localStorage.getItem("user");Object(n.useEffect)((function(){ae||t.push("./login")}),[]);var ne=Object(n.useMemo)((function(){return N?URL.createObjectURL(N):null}),[N]);console.log(l,d,k,N,R,J);var re=function(){var e=Object(m.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),(n=new FormData).append("thumbnail",N),n.append("title",l),n.append("description",d),n.append("price",k),n.append("activities",R),n.append("date",J),e.prev=8,""===l||""===d||""===k||"activities"===R||""===J||null===N){e.next=16;break}return e.next=12,f.post("/event",n,{headers:{user:ae}});case 12:X(!0),setTimeout((function(){X(!1),t.push("/")}),2e3),e.next=18;break;case 16:H(!0),setTimeout((function(){H(!1)}),2e3);case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),Promise.reject(e.t0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[8,20]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){return F(e)};return console.log(R),r.a.createElement(v.a,null,r.a.createElement(E.a,{onSubmit:re},r.a.createElement(b.a,null,r.a.createElement(q.a,null,"Upload Image: "),r.a.createElement(q.a,{id:"thumbnail",style:{backgroundImage:"url(".concat(ne,")")},className:N?"has-thumbnail":""},r.a.createElement(g.a,{type:"file",onChange:function(e){return D(e.target.files[0])}}),r.a.createElement("img",{src:Y.a,alt:"camera",style:{maxWidth:"50px"}}))),r.a.createElement(b.a,null,r.a.createElement(q.a,null,"Title: "),r.a.createElement(g.a,{id:"title",type:"text",value:l,placeholder:"Event title here",onChange:function(e){return o(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(q.a,null,"Event description: "),r.a.createElement(g.a,{id:"description",type:"textarea",value:d,placeholder:"Event description here",onChange:function(e){return O(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(q.a,null,"Event price: "),r.a.createElement(g.a,{id:"price",type:"text",value:k,placeholder:"Event price here e.g \u20a60.00",onChange:function(e){return S(e.target.value)}})),r.a.createElement(b.a,null,r.a.createElement(q.a,null,"Event Date"),r.a.createElement(g.a,{type:"date",id:"date",value:J,onChange:function(e){return z(e.target.value)},placeholder:"Event date"})),r.a.createElement(b.a,null,r.a.createElement(A.a,{isOpen:ee,className:"Secondary-btn",toggle:function(){return te(!ee)}},r.a.createElement(h.a,{id:"caret",color:"primary",value:R,disabled:!0},R),r.a.createElement(I.a,{caret:!0,color:"primary"}),r.a.createElement(_.a,null,r.a.createElement(T.a,{onClick:function(){return ce("online_training")}},"Online training"),r.a.createElement(T.a,{onClick:function(){return ce("programming")}},"Programming"),r.a.createElement(T.a,{onClick:function(){return ce("training")}},"Training"),r.a.createElement(T.a,{onClick:function(){return ce("others")}},"Others")))),r.a.createElement(b.a,null,r.a.createElement(h.a,{type:"submit",className:"submit-btn"},"Create Event")),r.a.createElement(b.a,null,r.a.createElement(h.a,{type:"secondary-btn",className:"Secondary-btn",onClick:function(){return t.push("/")}},"Cancel"))),G?r.a.createElement(j.a,{className:"event-validation",color:"danger"}," ","Missing required information"):"",V?r.a.createElement(j.a,{className:"event-validation",color:"success"}," ","the event was created successfully"):"")}var M=a(193),J=a(194),z=a(195),B=a(196),W=a(197),G=function(){var e=Object(n.useContext)(O),t=e.isLoggedIn,a=e.setIsloggedIn,c=Object(n.useState)(!0),l=Object(p.a)(c,2),s=l[0],u=l[1];return t?r.a.createElement("div",null,r.a.createElement(M.a,{color:"faded",light:!0},r.a.createElement(J.a,{onClick:function(){return u(!s)}}),r.a.createElement(o.b,{to:"/login",onClick:function(){localStorage.removeItem("user"),localStorage.removeItem("user_id"),a(!1)}},"Logout"),r.a.createElement(z.a,{isOpen:!s,navbar:!0},r.a.createElement(B.a,{navbar:!0},r.a.createElement(W.a,null,r.a.createElement(o.b,{to:"/events"},"Events")),r.a.createElement(W.a,null,r.a.createElement(o.b,{to:"/"},"Dashboard")),r.a.createElement(W.a,null,r.a.createElement(o.b,{to:"/notifications"},"Notifications")))))):""};a(182);function H(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],l=localStorage.getItem("user");Object(n.useEffect)((function(){o()}),[]);var o=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("/registration",{headers:{user:l}});case 3:t=e.sent,c(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(e){return!0===e?"Approved":"Rejected"},u=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/registration/".concat(t,"/approvals"),{},{headers:{user:l}});case 3:o(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/registration/".concat(t,"/rejections"),{},{headers:{user:l}});case 3:o(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("ul",{className:"events"},a.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",null,r.a.createElement("strong",null,e.eventTitle)),r.a.createElement("div",{className:"events-details"},r.a.createElement("span",null,"Event Date: ",w()(e.eventDate).format("l")),r.a.createElement("span",null,"Event Price: \u20a6 ",parseFloat(e.eventPrice).toFixed(2)),r.a.createElement("span",null,"User Email: ",e.userEmail),r.a.createElement("span",null," Status:",r.a.createElement("span",{className:void 0!==e.approved?s(e.approved):"Pending"},void 0!==e.approved?s(e.approved):"Pending"))),r.a.createElement(C.a,null,r.a.createElement(h.a,{disabled:!0===e.approved||!1===e.approved,color:"success",onClick:function(){return u(e._id)}},"Accept"),r.a.createElement(h.a,{disabled:!0===e.approved||!1===e.approved,color:"danger",onClick:function(){return d(e._id)}},"Reject")))})))}function K(){return r.a.createElement(o.a,null,r.a.createElement(G,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:L}),r.a.createElement(s.a,{exact:!0,path:"/notifications",component:H}),r.a.createElement(s.a,{exact:!0,path:"/login",component:x}),r.a.createElement(s.a,{exact:!0,path:"/register",component:R}),r.a.createElement(s.a,{path:"/events",component:U})))}var Q=function(){return r.a.createElement(y,null,r.a.createElement(v.a,null,r.a.createElement("h1",null,"Event app"),r.a.createElement("div",{className:"content"},r.a.createElement(K,null))))};a(183);l.a.render(r.a.createElement(Q,null),document.getElementById("root"))},95:function(e,t,a){e.exports=a.p+"static/media/camera.91a960a0.png"},98:function(e,t,a){e.exports=a(184)}},[[98,1,2]]]);
//# sourceMappingURL=main.61d3e5bb.chunk.js.map